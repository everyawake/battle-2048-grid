(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{38:function(e,n,t){e.exports=t(64)},64:function(e,n,t){"use strict";t.r(n);var o=t(7),r=t(0),a=t.n(r),i=t(26),c=t.n(i),l=t(5),u=t(3),s=t(2);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d=t(8),h=t(9),f=t(13),g=t(12),b=t(14),m=t(29),v="#d7ffd9",p="#000000",y="#e8e8e8",w="#fff";function O(){var e=Object(o.a)(["\n  width: 32rem;\n  padding: 1.2rem;\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 0.8rem;\n  text-align: center;\n  text-decoration: none;\n  color: ",";\n\n  &:focus {\n    outline: none;\n  }\n\n  &:hover {\n    background-color: ",";\n    box-shadow: 0.1rem 0.1rem 0.3rem 0 rgba(0, 0, 0, 0.75);\n  }\n"]);return O=function(){return e},e}function E(){var e=Object(o.a)(["\n  width: 100%;\n  height: 100%;\n  font-size: 1rem;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  background-color: ",";\n"]);return E=function(){return e},e}var j=l.c.div(E(),y),B=Object(l.c)(m.a).attrs({type:"button"})(O(),w,y,p,v),k=function(e){function n(){return Object(d.a)(this,n),Object(f.a)(this,Object(g.a)(n).apply(this,arguments))}return Object(b.a)(n,e),Object(h.a)(n,[{key:"render",value:function(){return r.createElement(j,null,r.createElement(B,{to:"/single"},r.createElement("span",null,"Single Play")))}}]),n}(r.PureComponent);function z(){var e=Object(o.a)(["\n  width: 100%;\n  height: 100%;\n  font-size: 1rem;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  background-color: ",";\n"]);return z=function(){return e},e}var C=l.c.div(z(),y),S=t(32),x=t(33),P=t.n(x),R=t(34),G=t.n(R);function K(){var e=Object(o.a)(["\n  width: ",";\n  height: ",";\n  background-color: ",";\n"]);return K=function(){return e},e}var I=l.c.canvas(K(),(function(e){return"".concat((e.width/10).toFixed(1),"rem")}),(function(e){return"".concat((e.height/10).toFixed(1),"rem")}),w);function M(e,n){return Math.floor(Math.random()*(+n-+e))+ +e}var A=function(){return{r:M(0,255),g:M(0,255),b:M(0,255)}},D=t(35),F=function(){function e(){var n=this;Object(d.a)(this,e),this.currentBoardSize=0,this.generateBlockCountPerMove=1,this.board=[],this.isInitialized=!1,this.startValue=2,this.maxBoardSearchCount=4,this.onBoardChange=function(){},this.onGameEnd=function(){},this.getBoard=function(){return n.board},this.newBlockAtRandomPosition=function(){if(!n.isInitialized)throw new Error("[\u274c] error: Must be initialize before use!");for(var e=0;e<n.generateBlockCountPerMove;e++)n.getEmptyRandomPosition().then((function(e){var t=e.x,o=e.y;console.log("!!!! {x,y}: {".concat(t,", ").concat(o,"}")),n.board[t][o]={value:n.startValue},n.onBoardChange(n.board)})).catch((function(){console.log("!!! no space"),n.onGameEnd()}))},this.getEmptyRandomPosition=function(){return new Promise((function(e,t){var o,r,a=1;console.time("getEmptyRandomPosition");do{if(a===n.maxBoardSearchCount){o=null,r=null;break}o=M(0,n.currentBoardSize),r=M(0,n.currentBoardSize),a++}while(!n.isEmpty(o,r));console.timeEnd("getEmptyRandomPosition"),null!==o&&null!==r?e({x:o,y:r}):t()}))},this.isEmpty=function(e,t){return 0===n.board[e][t].value}}return Object(h.a)(e,[{key:"initializeBoard",value:function(e){var n=e.boardSize,t=e.onBoardChange,o=e.onGameEnd;this.currentBoardSize=n,this.generateBlockCountPerMove=Math.round(n/2),this.maxBoardSearchCount=Math.pow(n,n),this.onBoardChange=t,this.onGameEnd=o,this.board=new Array(n);for(var r=0;r<n;r++)this.board[r]=Object(D.fill)(new Array(n),{value:0});this.isInitialized=!0,this.newBlockAtRandomPosition()}},{key:"move",value:function(e){console.log("!!!!! Direction: ",e),this.newBlockAtRandomPosition()}}]),e}();function W(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}var H=function(e){function n(){var e,t;Object(d.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(t=Object(f.a)(this,(e=Object(g.a)(n)).call.apply(e,[this].concat(a)))).state={canvasWidth:0,canvasHeight:0},t.engine=new F,t.refCanvasBoard=r.createRef(),t.canvasContext=null,t.getRelativeBlockSize=G()((function(e){var n=e.canvasWidth,t=e.canvasHeight,o=e.boardSize;return{width:n/o,height:t/o}})),t.drawRect=function(e){var n=t.canvasContext,o=t.getRelativeBlockSize(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?W(t,!0).forEach((function(n){Object(S.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):W(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},t.state,{boardSize:t.props.boardSize})),r=o.width,a=o.height;if(n){var i=e.posX,c=e.posY,l=A(),u=l.r,s=l.g,d=l.b;n.fillStyle="rgba(".concat(u,", ").concat(s,", ").concat(d,", 0.8)"),n.fillRect(i*r,c*a,r,a)}},t.renderBoard=function(e){for(var n=t.props.boardSize,o=0;o<n;o++)for(var r=0;r<n;r++){var a=e[o][r];a.value&&t.drawRect({posX:o,posY:r,value:a})}},t.initializeGameEngine=function(){var e=t.props.boardSize;t.engine.initializeBoard({boardSize:e,onBoardChange:t.handleBoardChange,onGameEnd:t.handleGameEnd}),console.info("[\u2714\ufe0f] Success to initialize Game engine")},t.initializeCanvas=function(){var e=t.refCanvasBoard.current;e?(t.canvasContext=e.getContext("2d"),t.canvasContext&&(console.info("[\u2714\ufe0f] Success to initialize canvas"),t.setState({canvasWidth:e.width,canvasHeight:e.height}),t.renderBoard(t.engine.getBoard()),t.registerKeyboardInput())):console.error("[\u274c] Failed to initialize canvas")},t.registerKeyboardInput=function(){window?(window.addEventListener("keydown",t.debounceKeyDown),console.info("[\u2714\ufe0f] Success to register keyboard input")):console.error("[\u274c] Failed to register keyboard input")},t.handleBoardChange=function(e){console.log("!!!! handleBoardChange",e),t.renderBoard(e)},t.handleGameEnd=function(){alert(" - GAME END - ")},t.handleArrowKey=function(e){var n=null;switch(e.keyCode){case 37:console.log("KeyInput: left arrow"),n="left";break;case 38:console.log("KeyInput: up arrow"),n="up";break;case 39:console.log("KeyInput: right arrow"),n="right";break;case 40:console.log("KeyInput: down arrow"),n="down"}n&&t.engine.move(n)},t.debounceKeyDown=P()(t.handleArrowKey,150),t}return Object(b.a)(n,e),Object(h.a)(n,[{key:"componentDidMount",value:function(){this.initializeGameEngine(),this.initializeCanvas()}},{key:"render",value:function(){var e=this.props,n=e.width,t=e.height;return r.createElement(I,{width:n,height:t,ref:this.refCanvasBoard})}}]),n}(r.PureComponent),J=function(e){function n(){return Object(d.a)(this,n),Object(f.a)(this,Object(g.a)(n).apply(this,arguments))}return Object(b.a)(n,e),Object(h.a)(n,[{key:"render",value:function(){return r.createElement(C,null,r.createElement("title",null,r.createElement("h1",null,"Single play mode")),r.createElement("div",null,r.createElement(H,{width:500,height:500,boardSize:4})))}}]),n}(r.PureComponent);function N(){var e=Object(o.a)(["\n  html,\n  body {\n    margin: 0;\n    padding: 0;\n    font-size: 10px;\n  }\n\n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: 'Noto Sans KR', sans-serif;\n  }\n\n  #root,\n  body {\n    width: 100vw;\n    height: 100vh;\n  }\n"]);return N=function(){return e},e}var V=Object(l.b)(N()),X=Object(s.a)();c.a.render(a.a.createElement(l.a,{theme:{}},a.a.createElement(a.a.Fragment,null,a.a.createElement(V,null),a.a.createElement(u.b,{history:X},a.a.createElement(u.c,null,a.a.createElement(u.a,{path:"/single",exact:!0,component:J}),a.a.createElement(u.a,{path:"/",component:k}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.e8471b47.chunk.js.map